# 测试指南

## 图表溢出修复验证

### 测试步骤

1. **启动应用**

   ```bash
   flutter run -d web-server --web-port=59988
   ```

2. **导航到错题分析页面**

   - 点击底部导航栏的"错题分析"
   - 选择"趋势图表"标签

3. **测试不同数据场景**

   #### 场景 1: 正常数据

   - 查看默认的示例数据图表
   - 验证柱状图是否完全显示在容器内
   - 检查数值标签是否清晰可见

   #### 场景 2: 极端数据（可通过修改示例数据测试）

   - 测试数值为 0 的情况
   - 测试非常大的数值
   - 验证图表是否正确缩放

   #### 场景 3: 响应式测试

   - 调整浏览器窗口大小
   - 验证图表是否自动适应新尺寸
   - 检查在小屏幕上的显示效果

### 预期结果

- ✅ 柱状图完全显示在容器内，无溢出
- ✅ 数值标签清晰可见，不重叠
- ✅ 图表在不同屏幕尺寸下正常显示
- ✅ 数据为 0 时显示灰色占位符
- ✅ 大数值时图表正确缩放

## 深色模式颜色修复验证

### 测试步骤

1. **浅色模式测试**

   - 确保应用处于浅色模式
   - 导航到错题分析页面
   - 检查所有文本元素的可读性

2. **深色模式测试**

   - 切换到深色模式（通过设置或系统设置）
   - 重新检查错题分析页面
   - 特别关注以下元素：
     - TabBar 标签（错题列表、统计分析、趋势图表）
     - 统计卡片标题
     - 数值显示
     - 空状态提示

3. **主题切换测试**
   - 在浅色和深色模式之间切换
   - 验证颜色过渡是否平滑
   - 检查是否有颜色异常

### 预期结果

- ✅ 浅色模式下所有文本清晰可见
- ✅ 深色模式下所有文本清晰可见
- ✅ TabBar 选中状态有明显的视觉反馈
- ✅ 统计数值使用强调色显示
- ✅ 主题切换时颜色正确更新

## 具体检查点

### 错题列表标签页

- [ ] 搜索框文本颜色正确
- [ ] 筛选器标签颜色正确
- [ ] 错题卡片文本颜色正确
- [ ] 空状态提示颜色正确

### 统计分析标签页

- [ ] 统计卡片标题颜色正确
- [ ] 数值显示使用强调色
- [ ] 标签文本颜色正确

### 趋势图表标签页

- [ ] 页面标题颜色正确
- [ ] 图表容器内文本颜色正确
- [ ] 柱状图无溢出现象
- [ ] 数值标签清晰可见
- [ ] 日期标签清晰可见
- [ ] 导出按钮文本颜色正确

## 性能测试

### 图表渲染性能

1. 打开浏览器开发者工具
2. 切换到 Performance 标签
3. 录制页面加载和图表渲染过程
4. 检查是否有性能瓶颈

### 内存使用

1. 在开发者工具中监控内存使用
2. 多次切换标签页
3. 检查是否有内存泄漏

## 常见问题排查

### 图表仍然溢出

- 检查是否有 CSS 样式冲突
- 验证 LayoutBuilder 是否正确工作
- 检查数据计算逻辑

### 文本颜色仍然不正确

- 确认主题配置是否正确加载
- 检查是否有硬编码颜色覆盖主题设置
- 验证 ColorScheme 是否正确配置

### 性能问题

- 检查是否有不必要的重建
- 验证数据处理逻辑是否高效
- 考虑添加缓存机制

## 测试环境

### 推荐测试环境

- **浏览器**: Chrome, Firefox, Safari
- **屏幕尺寸**: 桌面(1920x1080), 平板(768x1024), 手机(375x667)
- **主题模式**: 浅色模式, 深色模式, 跟随系统

### 测试数据

应用包含示例数据，可以直接用于测试。如需自定义测试数据，可以：

1. 添加新的错题记录
2. 修改`lib/services/sample_data_service.dart`中的示例数据
3. 清空数据后重新生成示例数据

## 报告问题

如果发现问题，请提供以下信息：

1. 问题描述
2. 复现步骤
3. 预期结果 vs 实际结果
4. 测试环境（浏览器、屏幕尺寸、主题模式）
5. 截图或录屏（如适用）
