# TeachAI Web æœåŠ¡å™¨

TeachAI åº”ç”¨çš„ Web ç‰ˆæœ¬åç«¯æœåŠ¡å™¨ï¼Œæä¾›æ•™æ¡ˆç”Ÿæˆã€ç»ƒä¹ é¢˜ç”Ÿæˆå’Œå†…å®¹åˆ†æç­‰ API æœåŠ¡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm >= 8.0.0

### å®‰è£…æ­¥éª¤

1. **è¿›å…¥æœåŠ¡å™¨ç›®å½•**

   ```bash
   cd server
   ```

2. **å®‰è£…ä¾èµ–**

   ```bash
   npm install
   ```

3. **é…ç½® AI æœåŠ¡**

   ```bash
   # è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰
   ./setup-ai.sh

   # æˆ–è€…æ‰‹åŠ¨é…ç½®
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ æ‚¨çš„é˜¿é‡Œäº‘APIå¯†é’¥
   ```

   ğŸ“– **è¯¦ç»†é…ç½®æŒ‡å—**: è¯·æŸ¥çœ‹ [AI_SETUP.md](./AI_SETUP.md)

4. **å¯åŠ¨æœåŠ¡å™¨**

   ```bash
   # å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
   npm run dev

   # ç”Ÿäº§æ¨¡å¼
   npm start
   ```

5. **éªŒè¯æœåŠ¡å™¨è¿è¡Œ**
   è®¿é—®ï¼šhttp://localhost:3000/api/health

## ğŸ“š API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

- **åŸºç¡€ URL**: http://localhost:3000/api
- **å†…å®¹ç±»å‹**: application/json
- **å­—ç¬¦ç¼–ç **: UTF-8

### ç«¯ç‚¹åˆ—è¡¨

#### 1. å¥åº·æ£€æŸ¥

```
GET /api/health
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "status": "healthy",
  "timestamp": "2024-01-20T10:30:00+08:00",
  "uptime": 3600,
  "version": "1.0.0"
}
```

#### 2. æœåŠ¡å™¨çŠ¶æ€

```
GET /api/status
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "server": "TeachAI Web Server",
  "status": "running",
  "timestamp": "2024-01-20T10:30:00+08:00",
  "uptime": 3600,
  "memory": {...},
  "version": "1.0.0",
  "ai": {
    "enabled": true,
    "model": "qwen-turbo",
    "maxTokens": 2000,
    "temperature": 0.7,
    "apiConfigured": true
  },
  "endpoints": [...]
}
```

#### 3. ç”Ÿæˆæ•™æ¡ˆ

```
POST /api/lesson-plan
```

**è¯·æ±‚å‚æ•°**:

```json
{
  "subject": "æ•°å­¦",
  "grade": "å°å­¦ä¸‰å¹´çº§",
  "topic": "åˆ†æ•°çš„è®¤è¯†",
  "requirements": "æ³¨é‡å®è·µæ“ä½œ"
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "content": "# å°å­¦ä¸‰å¹´çº§ æ•°å­¦æ•™æ¡ˆ - åˆ†æ•°çš„è®¤è¯†\n\n## æ•™å­¦ç›®æ ‡...",
  "timestamp": "2024-01-20T10:30:00+08:00",
  "metadata": {
    "subject": "æ•°å­¦",
    "grade": "å°å­¦ä¸‰å¹´çº§",
    "topic": "åˆ†æ•°çš„è®¤è¯†",
    "requirements": "æ³¨é‡å®è·µæ“ä½œ",
    "wordCount": 1250
  }
}
```

#### 4. ç”Ÿæˆç»ƒä¹ é¢˜

```
POST /api/exercises
```

**è¯·æ±‚å‚æ•°**:

```json
{
  "subject": "æ•°å­¦",
  "grade": "å°å­¦ä¸‰å¹´çº§",
  "topic": "åˆ†æ•°çš„è®¤è¯†",
  "difficulty": "medium",
  "count": 5
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "content": "# å°å­¦ä¸‰å¹´çº§ æ•°å­¦ç»ƒä¹ é¢˜ - åˆ†æ•°çš„è®¤è¯†\n\n...",
  "timestamp": "2024-01-20T10:30:00+08:00",
  "metadata": {
    "subject": "æ•°å­¦",
    "grade": "å°å­¦ä¸‰å¹´çº§",
    "topic": "åˆ†æ•°çš„è®¤è¯†",
    "difficulty": "medium",
    "count": 5,
    "wordCount": 850
  }
}
```

#### 5. å†…å®¹åˆ†æ

```
POST /api/analyze
```

**è¯·æ±‚å‚æ•°**:

```json
{
  "content": "è¦åˆ†æçš„å†…å®¹æ–‡æœ¬...",
  "analysisType": "è¯­æ³•æ£€æŸ¥"
}
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "success": true,
  "content": "# å†…å®¹åˆ†ææŠ¥å‘Š - è¯­æ³•æ£€æŸ¥\n\n...",
  "timestamp": "2024-01-20T10:30:00+08:00",
  "metadata": {
    "analysisType": "è¯­æ³•æ£€æŸ¥",
    "originalLength": 200,
    "analysisLength": 800
  }
}
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å            | é»˜è®¤å€¼      | è¯´æ˜             |
| ----------------- | ----------- | ---------------- |
| PORT              | 3000        | æœåŠ¡å™¨ç«¯å£       |
| NODE_ENV          | development | è¿è¡Œç¯å¢ƒ         |
| LOG_LEVEL         | info        | æ—¥å¿—çº§åˆ«         |
| CORS_ORIGIN       | \*          | CORS æ¥æºé…ç½®    |
| DASHSCOPE_API_KEY | -           | é˜¿é‡Œäº‘ API å¯†é’¥  |
| QWEN_MODEL        | qwen-turbo  | é€šä¹‰åƒé—®æ¨¡å‹     |
| AI_ENABLED        | true        | æ˜¯å¦å¯ç”¨ AI æœåŠ¡ |
| AI_MAX_TOKENS     | 2000        | æœ€å¤§ token æ•°é‡  |
| AI_TEMPERATURE    | 0.7         | ç”Ÿæˆæ–‡æœ¬éšæœºæ€§   |

### æ—¥å¿—æ–‡ä»¶

- `error.log`: é”™è¯¯æ—¥å¿—
- `combined.log`: å®Œæ•´æ—¥å¿—

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
server/
â”œâ”€â”€ server.js          # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ ai-service.js      # AIæœåŠ¡æ¨¡å—
â”œâ”€â”€ package.json       # ä¾èµ–é…ç½®
â”œâ”€â”€ .env.example       # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .env               # å®é™…ç¯å¢ƒé…ç½®
â”œâ”€â”€ AI_SETUP.md        # AIé…ç½®æŒ‡å—
â”œâ”€â”€ setup-ai.sh        # AIé…ç½®è„šæœ¬
â”œâ”€â”€ README.md          # æ–‡æ¡£
â”œâ”€â”€ error.log          # é”™è¯¯æ—¥å¿—
â””â”€â”€ combined.log       # å®Œæ•´æ—¥å¿—
```

### æ·»åŠ æ–° API ç«¯ç‚¹

1. åœ¨ `server.js` ä¸­æ·»åŠ è·¯ç”±å¤„ç†å‡½æ•°
2. å®ç°ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘
3. æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. æ›´æ–° API æ–‡æ¡£

### æ—¥å¿—ä½¿ç”¨

```javascript
const winston = require("winston");

// è®°å½•ä¿¡æ¯
logger.info("æ“ä½œæˆåŠŸ", { data: {} });

// è®°å½•é”™è¯¯
logger.error("æ“ä½œå¤±è´¥", error);
```

## ğŸš¦ æµ‹è¯•

### ä½¿ç”¨ curl æµ‹è¯•

1. **å¥åº·æ£€æŸ¥**

   ```bash
   curl http://localhost:3000/api/health
   ```

2. **ç”Ÿæˆæ•™æ¡ˆ**

   ```bash
   curl -X POST http://localhost:3000/api/lesson-plan \
     -H "Content-Type: application/json" \
     -d '{"subject":"æ•°å­¦","grade":"å°å­¦ä¸‰å¹´çº§","topic":"åˆ†æ•°çš„è®¤è¯†"}'
   ```

3. **ç”Ÿæˆç»ƒä¹ é¢˜**
   ```bash
   curl -X POST http://localhost:3000/api/exercises \
     -H "Content-Type: application/json" \
     -d '{"subject":"æ•°å­¦","grade":"å°å­¦ä¸‰å¹´çº§","topic":"åˆ†æ•°çš„è®¤è¯†","difficulty":"medium","count":5}'
   ```

## ğŸ“Š ç›‘æ§

### æ€§èƒ½ç›‘æ§

- è¯·æ±‚å“åº”æ—¶é—´è®°å½•åœ¨æ—¥å¿—ä¸­
- å†…å­˜ä½¿ç”¨æƒ…å†µå¯é€šè¿‡ `/api/status` æŸ¥çœ‹
- æœåŠ¡å™¨è¿è¡Œæ—¶é—´ç»Ÿè®¡

### é”™è¯¯ç›‘æ§

- æ‰€æœ‰é”™è¯¯è‡ªåŠ¨è®°å½•åˆ° `error.log`
- åŒ…å«é”™è¯¯å †æ ˆä¿¡æ¯å’Œè¯·æ±‚ä¸Šä¸‹æ–‡

## ğŸ” å®‰å…¨ç‰¹æ€§

- ä½¿ç”¨ Helmet.js è®¾ç½®å®‰å…¨å¤´
- CORS è·¨åŸŸä¿æŠ¤
- è¯·æ±‚ä½“å¤§å°é™åˆ¶ï¼ˆ10MBï¼‰
- è¾“å…¥å‚æ•°éªŒè¯

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-20)

- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒæ•™æ¡ˆç”Ÿæˆ API
- æ”¯æŒç»ƒä¹ é¢˜ç”Ÿæˆ API
- æ”¯æŒå†…å®¹åˆ†æ API
- å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ
- å¥åº·æ£€æŸ¥å’ŒçŠ¶æ€ç›‘æ§

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æäº¤ Issueã€‚
